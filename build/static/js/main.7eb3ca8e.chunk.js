(this["webpackJsonpsoftware-one-react-app"]=this["webpackJsonpsoftware-one-react-app"]||[]).push([[0],{19:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var a=n(3),r=n.n(a),i=n(6),o=n(31),s=n.n(o),c=n(32),u=s.a.create({baseURL:c.a.API_URL});u.interceptors.request.use(function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.headers.Authorization="Basic ".concat(e.from("oleksi:sHs7&%s5B0^5","utf8").toString("base64")),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){return e}),(function(e){return e.response&&e.response.status,Promise.reject(e)}))}).call(this,n(42).Buffer)},32:function(e,t,n){"use strict";n(62).config(),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).local),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL,t.a={API_URL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL}},39:function(e,t,n){},40:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(2),i=n.n(r),o=n(30),s=n.n(o),c=(n(39),n(40),n(10)),u=n(16),l=n(3),d=n.n(l),p=n(6),h=n(7),f=n(8),m=n(19),g=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,null,[{key:"getAll",value:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.get(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDetails",value:function(){var e=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.get("/".concat(t,"/entities/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),y=(n(65),n(12)),b=n(11),v=n(0),j=n(33),O=n(20),S=n(9),k=function(e){Object(y.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this))._temporaryShape=v.GraphObject.make(v.Shape,{name:"SHAPE",fill:null,strokeWidth:1.5}),e._archetypePartData={},e._isBackgroundOnly=!0,e.temp=v.GraphObject.make(v.Part,{layerName:"Tool"},e._temporaryShape),e.name="FreehandDrawing",e}return Object(f.a)(n,[{key:"canStart",value:function(){if(!this.isEnabled)return!1;var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly)return!1;if(!e.allowInsert)return!1;if(e.currentTool!==this&&this.isBackgroundOnly&&null!==e.findPartAt(e.lastInput.documentPoint,!0))return!1;return!0}},{key:"doActivate",value:function(){Object(O.a)(Object(S.a)(n.prototype),"doActivate",this).call(this),this.diagram.isMouseCaptured=!0,this.diagram.currentCursor="crosshair"}},{key:"doDeactivate",value:function(){Object(O.a)(Object(S.a)(n.prototype),"doDeactivate",this).call(this),null!==this.temporaryShape&&null!==this.temporaryShape.part&&this.diagram.remove(this.temporaryShape.part),this.diagram.currentCursor="",this.diagram.isMouseCaptured=!1}},{key:"addPoint",value:function(e){var t=this.temporaryShape;if(null!==t){var n=t.part;if(null!==n){var a=this.diagram.viewportBounds.position,r=new v.Point(e.x-a.x,e.y-a.y);if(null===n.diagram){var i=new v.PathFigure(r.x,r.y,!0),o=(new v.Geometry).add(i);t.geometry=o,n.position=new v.Point(a.x-t.strokeWidth/2,a.y-t.strokeWidth/2),this.diagram.add(n)}var s=t.geometry;if(null!==s){var c=s.figures.first();if(null!==c){var u=c.segments,l=u.count-1;if(l>=0){var d=u.elt(l);if(Math.abs(r.x-d.endX)<.5&&Math.abs(r.y-d.endY)<.5)return}var p=s.copy(),h=p.figures.first();null!==h&&(h.add(new v.PathSegment(v.PathSegment.Line,r.x,r.y)),t.geometry=p)}}}}}},{key:"doMouseDown",value:function(){this.isActive||(this.doActivate(),this.addPoint(this.diagram.lastInput.documentPoint))}},{key:"doMouseMove",value:function(){this.isActive&&this.addPoint(this.diagram.lastInput.documentPoint)}},{key:"doMouseUp",value:function(){var e=this.diagram,t=!1;if(this.isActive){t=!0,this.addPoint(e.lastInput.documentPoint);var n=e.viewportBounds.position;if(null!==this.temporaryShape.geometry){var a=this.temporaryShape.geometry.copy(),r=a.normalize();r.x=n.x-r.x,r.y=n.y-r.y,e.startTransaction(this.name);var i=e.model.copyNodeData(this.archetypePartData);if(null!==i){e.model.addNodeData(i);var o=e.findPartForData(i);if(null!==o){o.location=new v.Point(r.x+a.bounds.width/2,r.y+a.bounds.height/2);var s=o.findObject("SHAPE");null!==s&&(s.geometry=a)}}}}this.stopTool(),t&&e.commitTransaction(this.name)}},{key:"temporaryShape",get:function(){return this._temporaryShape},set:function(e){if(this._temporaryShape!==e&&null!==e){e.name="SHAPE";var t=this._temporaryShape.panel;null!==t&&(t.remove(this._temporaryShape),this._temporaryShape=e,t.add(this._temporaryShape))}}},{key:"archetypePartData",get:function(){return this._archetypePartData},set:function(e){this._archetypePartData=e}},{key:"isBackgroundOnly",get:function(){return this._isBackgroundOnly},set:function(e){this._isBackgroundOnly=e}}]),n}(v.Tool);function _(){v.Tool.call(this),this.name="GeometryReshaping";var e=new v.Shape;e.figure="Diamond",e.desiredSize=new v.Size(7,7),e.fill="lightblue",e.stroke="dodgerblue",e.cursor="move",this._handleArchetype=e,this._reshapeObjectName="SHAPE",this._handle=null,this._adornedShape=null,this._originalGeometry=null}v.Diagram.inherit(_,v.Tool),Object.defineProperty(_.prototype,"handleArchetype",{get:function(){return this._handleArchetype},set:function(e){this._handleArchetype=e}}),Object.defineProperty(_.prototype,"reshapeObjectName",{get:function(){return this._reshapeObjectName},set:function(e){this._reshapeObjectName=e}}),Object.defineProperty(_.prototype,"handle",{get:function(){return this._handle}}),Object.defineProperty(_.prototype,"adornedShape",{get:function(){return this._adornedShape}}),Object.defineProperty(_.prototype,"originalGeometry",{get:function(){return this._originalGeometry}}),_.prototype.updateAdornments=function(e){if(!(null===e||e instanceof v.Link)){if(e.isSelected&&!this.diagram.isReadOnly){var t=e.findObject(this.reshapeObjectName);if(t instanceof v.Shape&&t.actualBounds.isReal()&&t.isVisibleObject()&&e.canReshape()&&e.actualBounds.isReal()&&e.isVisible()&&t.geometry.type===v.Geometry.Path){var n=e.findAdornment(this.name);if(null===n&&(n=this.makeAdornment(t)),null!==n){var a=t.geometry,r=a.bounds;return n.findObject("BODY").desiredSize=r.size,n.elements.each((function(e){if(void 0!==e._typ){var t=a.figures.elt(e._fig),n=t.segments.elt(e._seg),i=0,o=0;switch(e._typ){case 0:i=t.startX,o=t.startY;break;case 1:i=n.endX,o=n.endY;break;case 2:i=n.point1X,o=n.point1Y;break;case 3:i=n.point2X,o=n.point2Y}e.alignment=new v.Spot(0,0,i-r.x,o-r.y)}})),e.addAdornment(this.name,n),n.location=t.getDocumentPoint(v.Spot.TopLeft),void(n.angle=t.getDocumentAngle())}}}e.removeAdornment(this.name)}},_.prototype.makeAdornment=function(e){var t=new v.Adornment;t.type=v.Panel.Spot,t.locationObjectName="BODY",t.locationSpot=new v.Spot(0,0,-e.strokeWidth/2,-e.strokeWidth/2),(o=new v.Shape).name="BODY",o.fill=null,o.stroke=null,o.strokeWidth=0,t.add(o);for(var n=e.geometry,a=0;a<n.figures.count;a++)for(var r=n.figures.elt(a),i=0;i<r.segments.count;i++){var o,s=r.segments.elt(i);0===i&&null!==(o=this.makeHandle(e,r,s))&&(o._typ=0,o._fig=a,o._seg=i,t.add(o)),null!==(o=this.makeHandle(e,r,s))&&(o._typ=1,o._fig=a,o._seg=i,t.add(o)),s.type!==v.PathSegment.QuadraticBezier&&s.type!==v.PathSegment.Bezier||(null!==(o=this.makeHandle(e,r,s))&&(o._typ=2,o._fig=a,o._seg=i,t.add(o)),s.type===v.PathSegment.Bezier&&null!==(o=this.makeHandle(e,r,s))&&(o._typ=3,o._fig=a,o._seg=i,t.add(o)))}return t.category=this.name,t.adornedObject=e,t},_.prototype.makeHandle=function(e,t,n){var a=this.handleArchetype;return null===a?null:a.copy()},_.prototype.canStart=function(){if(!this.isEnabled)return!1;var e=this.diagram;return null!==e&&!e.isReadOnly&&(!!e.allowReshape&&(!!e.lastInput.left&&null!==this.findToolHandleAt(e.firstInput.documentPoint,this.name)))},_.prototype.doActivate=function(){var e=this.diagram;if(null!==e&&(this._handle=this.findToolHandleAt(e.firstInput.documentPoint,this.name),null!==this._handle)){var t=this._handle.part.adornedObject;t&&(this._adornedShape=t,e.isMouseCaptured=!0,this.startTransaction(this.name),this._originalGeometry=t.geometry,this.isActive=!0)}},_.prototype.doDeactivate=function(){this.stopTransaction(),this._handle=null,this._adornedShape=null;var e=this.diagram;null!==e&&(e.isMouseCaptured=!1),this.isActive=!1},_.prototype.doCancel=function(){var e=this._adornedShape;null!==e&&(e.geometry=this._originalGeometry),this.stopTool()},_.prototype.doMouseMove=function(){var e=this.diagram;if(this.isActive&&null!==e){var t=this.computeReshape(e.lastInput.documentPoint);this.reshape(t)}},_.prototype.doMouseUp=function(){var e=this.diagram;if(this.isActive&&null!==e){var t=this.computeReshape(e.lastInput.documentPoint);this.reshape(t),this.transactionResult=this.name}this.stopTool()},_.prototype.reshape=function(e){var t=this.adornedShape;if(null!==t&&null!==t.geometry){var n=t.getLocalPoint(e),a=t.geometry.copy(),r=this.handle._typ;if(void 0!==r){var i=a.figures.elt(this.handle._fig),o=i.segments.elt(this.handle._seg);switch(r){case 0:i.startX=n.x,i.startY=n.y;break;case 1:o.endX=n.x,o.endY=n.y;break;case 2:o.point1X=n.x,o.point1Y=n.y;break;case 3:o.point2X=n.x,o.point2Y=n.y}var s=a.normalize();t.desiredSize=new v.Size(NaN,NaN),t.geometry=a;var c=t.part;c.ensureBounds(),c.locationObject===t||c.locationSpot.equals(v.Spot.Center)||c.move(c.position.copy().subtract(s.rotate(c.angle))),this.updateAdornments(c),this.diagram.maybeUpdate()}}},_.prototype.computeReshape=function(e){return e};n(66);var P=function(e){Object(y.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).modeChange=function(e){a.diagramRef.current.getDiagram().toolManager.findTool("FreehandDrawing").isEnabled=e},a.diagramRef=r.createRef(),a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){if(this.diagramRef.current){var e=this.diagramRef.current.getDiagram();e instanceof v.Diagram&&e.addDiagramListener("ChangedSelection",this.props.onDiagramEvent)}}},{key:"componentWillUnmount",value:function(){if(this.diagramRef.current){var e=this.diagramRef.current.getDiagram();e instanceof v.Diagram&&e.removeDiagramListener("ChangedSelection",this.props.onDiagramEvent)}}},{key:"initDiagram",value:function(){var e=v.GraphObject.make,t=e(v.Diagram,{"undoManager.isEnabled":!0,"clickCreatingTool.archetypeNodeData":{text:"new node",color:"lightblue"},layout:e(v.ForceDirectedLayout),model:e(v.GraphLinksModel,{linkKeyProperty:"key",makeUniqueKeyFunction:function(e,t){for(var n=t.key||1;e.findNodeDataForKey(n);)n++;return t.key=n,n},makeUniqueLinkKeyFunction:function(e,t){for(var n=t.key||-1;e.findLinkDataForKey(n);)n--;return t.key=n,n}})});t.toolManager.mouseDownTools.insertAt(3,new _),t.nodeTemplateMap.add("FreehandDrawing",e(v.Part,{locationSpot:v.Spot.Center,isLayoutPositioned:!1},new v.Binding("location","loc",v.Point.parse).makeTwoWay(v.Point.stringify),{selectionAdorned:!0,selectionObjectName:"SHAPE",selectionAdornmentTemplate:e(v.Adornment,"Auto",e(v.Shape,{stroke:"dodgerblue",fill:null}),e(v.Placeholder,{margin:-1}))},{resizable:!0,resizeObjectName:"SHAPE"},{rotatable:!0,rotateObjectName:"SHAPE"},{reshapable:!0},e(v.Shape,{name:"SHAPE",fill:null,strokeWidth:1.5},new v.Binding("desiredSize","size",v.Size.parse).makeTwoWay(v.Size.stringify),new v.Binding("angle").makeTwoWay(),new v.Binding("geometryString","geo").makeTwoWay(),new v.Binding("fill"),new v.Binding("stroke"),new v.Binding("strokeWidth"))));var n=new k;return n.archetypePartData={stroke:"black",strokeWidth:1.5,category:"FreehandDrawing"},n.isBackgroundOnly=!1,t.toolManager.mouseMoveTools.insertAt(0,n),t}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"diagram-wrapper",children:[Object(a.jsx)(j.a,{ref:this.diagramRef,divClassName:"diagram-component",initDiagram:this.initDiagram}),Object(a.jsxs)("div",{className:"mode-buttons",children:[Object(a.jsx)("button",{onClick:function(){return e.modeChange(!1)},children:"Select"}),Object(a.jsx)("button",{onClick:function(){return e.modeChange(!0)},children:"Draw mode"})]})]})}}]),n}(r.Component),x=function(e){Object(y.a)(n,e);var t=Object(b.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(f.a)(n,[{key:"render",value:function(){return Object(a.jsx)(P,{})}}]),n}(r.Component),w=(n(67),n(68),function(e){var t=e.panel;return console.log(t),"True"===t.visible?Object(a.jsxs)("div",{className:"item-wrapper",style:t.styles,children:[Object(a.jsxs)("div",{children:["Name: ",t.name]}),Object(a.jsxs)("div",{children:["Type:",t.type]}),Object(a.jsxs)("div",{children:["Title:",t.title]})]}):null}),D=function(e){var t=e.children,n=e.panels;if(!n)return Object(a.jsx)("div",{className:"entity-field",children:t});var r=n.left,i=n.right,o=n.bottom,s=n.top;return Object(a.jsxs)("div",{className:"upper-wrapper",children:[Boolean(r)&&r.length&&Object(a.jsx)("div",{className:"left-side",children:r.map((function(e,t){return Object(a.jsx)(w,{panel:e},t)}))}),Object(a.jsxs)("div",{className:"middle-side",children:[Boolean(s)&&s.length&&Object(a.jsx)("div",{className:"top-field",children:s.map((function(e,t){return Object(a.jsx)(w,{panel:e},t)}))}),Object(a.jsx)("div",{className:"entity-field",children:Object(a.jsx)(x,{})}),Boolean(o)&&o.length&&Object(a.jsx)("div",{className:"bottom-field",children:o.map((function(e,t){return Object(a.jsx)(w,{panel:e},t)}))})]}),Boolean(i)&&i.length&&Object(a.jsxs)("div",{className:"right-side",children:[" ",i.map((function(e,t){return Object(a.jsx)(w,{panel:e},t)}))]})]})},A=function(e){return{left:e.rectDotLeft,top:e.rectDotTop,name:e.entityName,property:e.setName}},T=(n(69),function(e){var t=e.setSelected,n=e.item,r=A(n),i=r.left,o=r.top,s=r.name;r.property;return console.log(A(n)),Object(a.jsx)("div",{className:"EntityItem",style:{left:i,top:o},onClick:function(){return t(n)},children:Object(a.jsx)("span",{children:s})})}),N=n(5),E=n(14),C=function(e){var t=Object(c.a)(e.data,1)[0];if(t)return t.attributes},R=function(e){var t=e.value,n=e.default;if(t||n)return t||n},B=function(e){var t=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n||t,i=e[t].default,o=e[t].value;if(o||i)return o?Object(E.a)({},r,Boolean(a)?o+a:o):Object(E.a)({},r,i)};return Object(N.a)(Object(N.a)(Object(N.a)(Object(N.a)(Object(N.a)(Object(N.a)(Object(N.a)({},t("background-color","backgroundColor")),t("width",!1,"px")),t("border")),t("border-color","borderColor")),t("font")),t("font-color","fontColor")),t("height",!1,"px"))},L=function(e,t){var n=C(e);if(n)return(n.children&&n.children.value).replace(/object:/gi,"");t(!1)},H=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(p.a)(d.a.mark((function e(n){var a,r,i,o,s,c,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t[n].value){e.next=2;break}return e.abrupt("return");case 2:return a=/panel:/gi,r=t[n].value.replace(a,""),e.next=6,g.getDetails("panel",r);case 6:if(i=e.sent,o=C(i),s=o["window-count"].value,c={name:R(o.name),title:R(o.title),type:R(o.type),visible:R(o.visible),styles:B(o)},1!==s){e.next=12;break}return e.abrupt("return",[Object(N.a)({},c)]);case 12:for(u=[],l=0;l<s;l++)u.push(Object(N.a)({},c));return e.abrupt("return",u);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,n("top-panel");case 3:return e.t0=e.sent,e.next=6,n("bottom-panel");case 6:return e.t1=e.sent,e.next=9,n("left-panel");case 9:return e.t2=e.sent,e.next=12,n("right-panel");case 12:return e.t3=e.sent,e.abrupt("return",{top:e.t0,bottom:e.t1,left:e.t2,right:e.t3});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(),s=Object(c.a)(o,2),l=s[0],h=s[1],f=Object(r.useState)(!1),m=Object(c.a)(f,2),y=m[0],b=m[1],v=function(e){var t=Object(r.useState)([]),n=Object(c.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){e(!0),g.getAll("/apmPage/entities/.*").then((function(t){var n=t.data.reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(JSON.parse(t.attributes.objects)))}),[]);i(n),e(!1)})).catch((function(e){console.log("Error-".concat(e))}))}),[e]),{entities:a,addEntityItem:function(e){return i((function(t){return[].concat(Object(u.a)(t),[e])}))}}}(b),j=v.entities;v.addEntityItem;return function(e,t,n){Object(r.useEffect)((function(){if(e){n(!0);var a=e.setName,r=e.entityName;!function(){var e=Object(p.a)(d.a.mark((function e(){var i,o,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getDetails(a,r);case 2:if(i=e.sent,o=L(i,n)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,g.getDetails("object",o);case 8:return s=e.sent,e.next=11,H(C(s));case 11:c=e.sent,t(c),n(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}}),[e,t,n])}(n,h,b),Object(r.useEffect)((function(){h()}),[n]),y?Object(a.jsx)("div",{className:"Layout",children:Object(a.jsx)("div",{className:"Loading",children:"Loading"})}):Object(a.jsx)("div",{className:"Layout",children:Object(a.jsx)(D,{panels:l,selected:n,children:j.map((function(e,t){return Object(a.jsx)(T,{item:e,setSelected:i},t)}))})})};var W=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(M,{})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(W,{})}),document.getElementById("root")),I()}},[[70,1,2]]]);
//# sourceMappingURL=main.7eb3ca8e.chunk.js.map